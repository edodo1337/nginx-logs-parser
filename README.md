# Использование
## Установка и запуск с использованием Docker

Соберите и запустите контейнеры:
```bash
cp example.env .env
docker-compose up --build
```
Приложение будет доступно по адресу: http://localhost:8000.


## Импорт логов
Для импорта Nginx логов используйте команду **import_nginx_logs**. Пример использования:
```python
python3 ./src/manage.py import_nginx_logs <file_path> --chunk_size 1000
```
- file_path: Путь к файлу лога.
- chunk_size: Опциональный параметр, задающий количество строк для обработки за раз (по умолчанию 1000).


# Детали реализации
- Polars: Выбран в качестве библиотеки для парсинга и проверки данных на лету, благодаря его высокой производительности.
- COPY FROM: Используется для загрузки данных в PostgreSQL, что значительно быстрее по сравнению с многократными вставками (INSERT).
- Многопоточная запись: Не была выбрана, так как в Python присутствует GIL, который ограничивает эффективность многопоточности. Кроме того, запись в PostgreSQL также блокируется, что делает многопоточную запись нецелесообразной.

# API
API предоставляет доступ к загруженным данным через следующие endpoints:

**GET /api/logs/** - Получить список логов с поддержкой пагинации, фильтрации и поиска.

Swagger-документация доступна по адресу **/api/docs/**.

# Тестирование
Используется pytest
```
make test
```